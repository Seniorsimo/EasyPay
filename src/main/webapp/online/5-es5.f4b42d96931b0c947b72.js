function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{fOOd:function(e,t,n){"use strict";n.r(t),n.d(t,"HomeModule",(function(){return z}));var o=n("ofXK"),c=n("tyNb"),r=n("M0ag"),i=n("2Vo4"),a=n("Kj3r"),s=n("eIep"),u=n("bOdf"),b=n("zorx"),p=n("2wdx"),m=n("lwos"),l=n("fXoL"),d=n("+yPv"),h=n("NdZx"),f=n("D6Gn"),g=n("b+GG"),v=n("BD0q"),S=n("NFeN"),y=n("UyyX"),C=function(){return["pin"]},I=function(){return["qr"]},w=function(){return["nfc"]};function L(e,t){if(1&e&&(l.Pb(0),l.Rb(1,"h1",2),l.Nb(2,"mat-icon",3),l.Qb(),l.Rb(3,"h2",4),l.tc(4,"EasyPay"),l.Qb(),l.Rb(5,"p",5),l.tc(6),l.cc(7,"currency"),l.cc(8,"async"),l.Qb(),l.Rb(9,"div"),l.Rb(10,"p",6),l.tc(11),l.cc(12,"async"),l.Qb(),l.Rb(13,"p",7),l.tc(14),l.cc(15,"async"),l.cc(16,"async"),l.Qb(),l.Qb(),l.Rb(17,"div",8),l.Nb(18,"router-outlet"),l.Qb(),l.Rb(19,"button",9),l.Nb(20,"mat-icon",10),l.Qb(),l.Rb(21,"button",11),l.Nb(22,"mat-icon",12),l.Qb(),l.Rb(23,"button",9),l.Nb(24,"mat-icon",13),l.Qb(),l.Ob()),2&e){var n=l.bc();l.Bb(6),l.uc(l.ec(7,7,l.dc(8,12,n.prezzo$),"EUR","symbol","1.2")),l.Bb(5),l.uc(l.dc(12,14,n.commerciante$).ragSoc),l.Bb(3),l.wc("",l.dc(15,16,n.commerciante$).cognome," ",l.dc(16,18,n.commerciante$).nome,""),l.Bb(5),l.hc("routerLink",l.ic(20,C)),l.Bb(2),l.hc("routerLink",l.ic(21,I)),l.Bb(2),l.hc("routerLink",l.ic(22,w))}}function E(e,t){if(1&e&&(l.Nb(0,"app-error",14),l.cc(1,"async")),2&e){var n=l.bc();l.hc("error",l.dc(1,1,n.error$))}}var O,$,P,k=[{path:"",component:(O=function(){function e(t,n,o,c,r,a,s){_classCallCheck(this,e),this.route=t,this.utenteService=n,this.pagamentoService=o,this.loaderService=c,this.contoService=r,this.utentiStore=a,this.contiStore=s,this.LoadingStatus=m.b,this.error$=new i.a(void 0),this.subscriptions=[],this.statusLoader$=this.loaderService.status$}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.commerciante$=new i.a(this.utentiStore.get(b.a.commerciante)),this.prezzo$=this.pagamentoService.prezzo$,this.subscriptions.push(this.route.queryParams.pipe(Object(a.a)(200),Object(s.a)((function(t){return localStorage.setItem("onlineToken",t.token),e.pagamentoService.setPrezzo(t.prezzo),e.commerciante$.value&&e.commerciante$.value.id?e.commerciante$:e.contoService.getConto(t.idConto).pipe(Object(u.a)((function(t){return e.contiStore.add(b.a.commerciante,t),e.utenteService.getUtenteNoSecurity(t.id)})))}))).subscribe({next:function(t){if(t.type!==b.a.commerciante){var n={type:p.a,name:"tipo account errato",message:"\xe8 necessario un account da commerciante, ma questo account \xe8 di tipo "+t.type};throw e.error$.next(n),e.loaderService.changeStatus(m.b.FAILED),n}e.utentiStore.add(b.a.commerciante,t),e.commerciante$.next(t),e.loaderService.changeStatus(m.b.SUCCESS)},error:function(t){e.error$.next(t),e.loaderService.changeStatus(m.b.FAILED)}}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}(),O.\u0275fac=function(e){return new(e||O)(l.Mb(c.a),l.Mb(d.a),l.Mb(h.a),l.Mb(m.a),l.Mb(f.a),l.Mb(g.a),l.Mb(v.a))},O.\u0275cmp=l.Gb({type:O,selectors:[["app-home"]],decls:4,vars:6,consts:[[4,"ngIf"],["titleLabel","Impossibile procedere con il pagamento. Se il problema persiste contattare il venditore","content","SUGGERIMENTO PER IL VENDITORE: assicurarsi che il idConto e prezzo siano validi",3,"error",4,"ngIf"],[1,"mb-0"],["svgIcon","bank",1,"logo"],[1,"logo-title","mt-0"],[1,"price"],[1,"customer-rs"],[1,"customer-name"],[1,"content"],["mat-icon-button","","queryParamsHandling","preserve",3,"routerLink"],["svgIcon","textbox-password"],["mat-icon-button","","queryParamsHandling","preserve",1,"mr-2","ml-2",3,"routerLink"],["svgIcon","qrcode"],["svgIcon","nfc-variant"],["titleLabel","Impossibile procedere con il pagamento. Se il problema persiste contattare il venditore","content","SUGGERIMENTO PER IL VENDITORE: assicurarsi che il idConto e prezzo siano validi",3,"error"]],template:function(e,t){1&e&&(l.sc(0,L,25,23,"ng-container",0),l.cc(1,"async"),l.sc(2,E,2,3,"app-error",1),l.cc(3,"async")),2&e&&(l.hc("ngIf",l.dc(1,2,t.statusLoader$)===t.LoadingStatus.SUCCESS),l.Bb(2),l.hc("ngIf",l.dc(3,4,t.statusLoader$)===t.LoadingStatus.FAILED))},directives:[o.m,S.a,c.e,c.c,y.a],pipes:[o.b,o.d],styles:[".logo[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]     svg{width:90px;height:90px}.content[_ngcontent-%COMP%]{margin:20px;min-height:175px}.customer-rs[_ngcontent-%COMP%]{margin:0}.customer-name[_ngcontent-%COMP%]{margin:0;font-size:12px}"]}),O),children:[{path:"",redirectTo:"pin",pathMatch:"full"},{path:"pin",component:r.b},{path:"qr",component:r.c},{path:"nfc",component:r.a}]}],M=(($=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:$}),$.\u0275inj=l.Jb({factory:function(e){return new(e||$)},imports:[[c.d.forChild(k)],c.d]}),$),R=n("pKmL"),z=((P=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:P}),P.\u0275inj=l.Jb({factory:function(e){return new(e||P)},imports:[[o.c,M,R.a,r.d]]}),P)}}]);