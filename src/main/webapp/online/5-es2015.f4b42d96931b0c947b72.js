(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{fOOd:function(t,e,n){"use strict";n.r(e),n.d(e,"HomeModule",(function(){return z}));var o=n("ofXK"),c=n("tyNb"),r=n("M0ag"),i=n("2Vo4"),a=n("Kj3r"),s=n("eIep"),b=n("bOdf"),u=n("zorx"),m=n("2wdx"),p=n("lwos"),h=n("fXoL"),d=n("+yPv"),l=n("NdZx"),g=n("D6Gn"),S=n("b+GG"),v=n("BD0q"),f=n("NFeN"),y=n("UyyX");const I=function(){return["pin"]},L=function(){return["qr"]},$=function(){return["nfc"]};function E(t,e){if(1&t&&(h.Pb(0),h.Rb(1,"h1",2),h.Nb(2,"mat-icon",3),h.Qb(),h.Rb(3,"h2",4),h.tc(4,"EasyPay"),h.Qb(),h.Rb(5,"p",5),h.tc(6),h.cc(7,"currency"),h.cc(8,"async"),h.Qb(),h.Rb(9,"div"),h.Rb(10,"p",6),h.tc(11),h.cc(12,"async"),h.Qb(),h.Rb(13,"p",7),h.tc(14),h.cc(15,"async"),h.cc(16,"async"),h.Qb(),h.Qb(),h.Rb(17,"div",8),h.Nb(18,"router-outlet"),h.Qb(),h.Rb(19,"button",9),h.Nb(20,"mat-icon",10),h.Qb(),h.Rb(21,"button",11),h.Nb(22,"mat-icon",12),h.Qb(),h.Rb(23,"button",9),h.Nb(24,"mat-icon",13),h.Qb(),h.Ob()),2&t){const t=h.bc();h.Bb(6),h.uc(h.ec(7,7,h.dc(8,12,t.prezzo$),"EUR","symbol","1.2")),h.Bb(5),h.uc(h.dc(12,14,t.commerciante$).ragSoc),h.Bb(3),h.wc("",h.dc(15,16,t.commerciante$).cognome," ",h.dc(16,18,t.commerciante$).nome,""),h.Bb(5),h.hc("routerLink",h.ic(20,I)),h.Bb(2),h.hc("routerLink",h.ic(21,L)),h.Bb(2),h.hc("routerLink",h.ic(22,$))}}function O(t,e){if(1&t&&(h.Nb(0,"app-error",14),h.cc(1,"async")),2&t){const t=h.bc();h.hc("error",h.dc(1,1,t.error$))}}const w=[{path:"",component:(()=>{class t{constructor(t,e,n,o,c,r,a){this.route=t,this.utenteService=e,this.pagamentoService=n,this.loaderService=o,this.contoService=c,this.utentiStore=r,this.contiStore=a,this.LoadingStatus=p.b,this.error$=new i.a(void 0),this.subscriptions=[],this.statusLoader$=this.loaderService.status$}ngOnInit(){this.commerciante$=new i.a(this.utentiStore.get(u.a.commerciante)),this.prezzo$=this.pagamentoService.prezzo$,this.subscriptions.push(this.route.queryParams.pipe(Object(a.a)(200),Object(s.a)(t=>(localStorage.setItem("onlineToken",t.token),this.pagamentoService.setPrezzo(t.prezzo),this.commerciante$.value&&this.commerciante$.value.id?this.commerciante$:this.contoService.getConto(t.idConto).pipe(Object(b.a)(t=>(this.contiStore.add(u.a.commerciante,t),this.utenteService.getUtenteNoSecurity(t.id))))))).subscribe({next:t=>{if(t.type!==u.a.commerciante){const e={type:m.a,name:"tipo account errato",message:"\xe8 necessario un account da commerciante, ma questo account \xe8 di tipo "+t.type};throw this.error$.next(e),this.loaderService.changeStatus(p.b.FAILED),e}this.utentiStore.add(u.a.commerciante,t),this.commerciante$.next(t),this.loaderService.changeStatus(p.b.SUCCESS)},error:t=>{this.error$.next(t),this.loaderService.changeStatus(p.b.FAILED)}}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(h.Mb(c.a),h.Mb(d.a),h.Mb(l.a),h.Mb(p.a),h.Mb(g.a),h.Mb(S.a),h.Mb(v.a))},t.\u0275cmp=h.Gb({type:t,selectors:[["app-home"]],decls:4,vars:6,consts:[[4,"ngIf"],["titleLabel","Impossibile procedere con il pagamento. Se il problema persiste contattare il venditore","content","SUGGERIMENTO PER IL VENDITORE: assicurarsi che il idConto e prezzo siano validi",3,"error",4,"ngIf"],[1,"mb-0"],["svgIcon","bank",1,"logo"],[1,"logo-title","mt-0"],[1,"price"],[1,"customer-rs"],[1,"customer-name"],[1,"content"],["mat-icon-button","","queryParamsHandling","preserve",3,"routerLink"],["svgIcon","textbox-password"],["mat-icon-button","","queryParamsHandling","preserve",1,"mr-2","ml-2",3,"routerLink"],["svgIcon","qrcode"],["svgIcon","nfc-variant"],["titleLabel","Impossibile procedere con il pagamento. Se il problema persiste contattare il venditore","content","SUGGERIMENTO PER IL VENDITORE: assicurarsi che il idConto e prezzo siano validi",3,"error"]],template:function(t,e){1&t&&(h.sc(0,E,25,23,"ng-container",0),h.cc(1,"async"),h.sc(2,O,2,3,"app-error",1),h.cc(3,"async")),2&t&&(h.hc("ngIf",h.dc(1,2,e.statusLoader$)===e.LoadingStatus.SUCCESS),h.Bb(2),h.hc("ngIf",h.dc(3,4,e.statusLoader$)===e.LoadingStatus.FAILED))},directives:[o.m,f.a,c.e,c.c,y.a],pipes:[o.b,o.d],styles:[".logo[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]     svg{width:90px;height:90px}.content[_ngcontent-%COMP%]{margin:20px;min-height:175px}.customer-rs[_ngcontent-%COMP%]{margin:0}.customer-name[_ngcontent-%COMP%]{margin:0;font-size:12px}"]}),t})(),children:[{path:"",redirectTo:"pin",pathMatch:"full"},{path:"pin",component:r.b},{path:"qr",component:r.c},{path:"nfc",component:r.a}]}];let M=(()=>{class t{}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(e){return new(e||t)},imports:[[c.d.forChild(w)],c.d]}),t})();var R=n("pKmL");let z=(()=>{class t{}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(e){return new(e||t)},imports:[[o.c,M,R.a,r.d]]}),t})()}}]);